import{a as t,s as a,t as n,q as i}from"./q-dgQLQ9M1.js";import{u as o}from"./q-CyNgVds-.js";import{L as c}from"./q-BuauhHiJ.js";const h=[{text:"Migrate to v0.31.0",id:"migrate-to-v0310",level:1},{text:"Automatic upgrade",id:"automatic-upgrade",level:2},{text:"Restructure code",id:"restructure-code",level:2},{text:"Change names",id:"change-names",level:2},{text:"Special cases",id:"special-cases",level:2},{text:"Objects and tuples",id:"objects-and-tuples",level:3},{text:"Object merging",id:"object-merging",level:3},{text:"Brand and transform",id:"brand-and-transform",level:3},{text:"Coerce method",id:"coerce-method",level:3},{text:"Flatten issues",id:"flatten-issues",level:3}],u={title:"Migrate to v0.31.0",meta:[{name:"description",content:"Migrating Valibot from an older version to v0.31.0 isn't complicated. Except for the new `pipe` method, most things remain the same."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller","jozefini","lesleh"]}},k={title:"Migrate to v0.31.0",description:"Migrating Valibot from an older version to v0.31.0 isn't complicated. Except for the new `pipe` method, most things remain the same.",contributors:["fabian-hiller","jozefini","lesleh"]};function l(s){const e={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...o(),...s.components};return n(i,{children:[n(e.h1,{id:"migrate-to-v0310",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#migrate-to-v0310",children:n(e.span,{class:"icon icon-link"})}),"Migrate to v0.31.0"]}),`
`,n(e.p,{children:["Migrating Valibot from an older version to v0.31.0 isn't complicated. Except for the new ",n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," method, most things remain the same. The following guide will help you to migrate automatically or manually step by step and also point out important differences."]}),`
`,n(e.h2,{id:"automatic-upgrade",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#automatic-upgrade",children:n(e.span,{class:"icon icon-link"})}),"Automatic upgrade"]}),`
`,n(e.p,{children:["We worked together with ",n(e.a,{href:"https://codemod.com/registry/valibot-migrate-to-v0-31-0",rel:"noreferrer",target:"_blank",children:"Codemod"})," and ",n(e.a,{href:"https://docs.grit.io/registry/github.com/fabian-hiller/valibot/migrate_to_v0_31_0",rel:"noreferrer",target:"_blank",children:"Grit"})," to automatically upgrade your schemas to the new version with a single CLI command. Both codemods are similar. You can use one or the other. Simply run the command in the directory of your project."]}),`
`,n(e.blockquote,{children:[`
`,n(e.p,{children:["We recommend using a version control system like ",n(e.a,{href:"https://git-scm.com/",rel:"noreferrer",target:"_blank",children:"Git"})," so that you can revert changes if the codemod screws something up."]}),`
`]}),`
`,n(e.pre,{class:"language-bash",children:n(e.code,{class:"language-bash",children:[n(e.span,{class:"token comment",children:"# Codemod"}),`
npx codemod valibot/migrate-to-v0.31.0

`,n(e.span,{class:"token comment",children:"# Grit"}),`
npx @getgrit/cli apply github.com/fabian-hiller/valibot`,n(e.span,{class:"token comment",children:"#migrate_to_v0_31_0"}),`
`]})}),`
`,n(e.p,{children:["Please create an ",n(e.a,{href:"https://github.com/fabian-hiller/valibot/issues/new",rel:"noreferrer",target:"_blank",children:"issue"})," if you encounter any problems or unexpected behavior with the provided codemods."]}),`
`,n(e.h2,{id:"restructure-code",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#restructure-code",children:n(e.span,{class:"icon icon-link"})}),"Restructure code"]}),`
`,n(e.p,{children:["As mentioned above, one of the biggest differences is the new ",n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," method. Previously, you passed the pipeline as an array to a schema function. Now you pass the schema with various actions to the new ",n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," method to extend a schema."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"Schema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"Schema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["We will be publishing a ",n(e.a,{href:"/blog/valibot-v0.31.0-is-finally-available/",children:"blog post"})," soon explaining all the benefits of this change. In the meantime, you can read the description of discussion ",n(e.a,{href:"https://github.com/fabian-hiller/valibot/discussions/463",rel:"noreferrer",target:"_blank",children:"#463"})," and PR ",n(e.a,{href:"https://github.com/fabian-hiller/valibot/pull/502",rel:"noreferrer",target:"_blank",children:"#502"}),", which introduced this change."]}),`
`,n(e.h2,{id:"change-names",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#change-names",children:n(e.span,{class:"icon icon-link"})}),"Change names"]}),`
`,n(e.p,{children:"Most of the names are the same as before. However, there are some exceptions. The following table shows all names that have changed."}),`
`,n(e.div,{class:"table-wrapper",children:n(e.table,{children:[n(e.thead,{children:n(e.tr,{children:[n(e.th,{children:"v0.30.0"}),n(e.th,{children:"v0.31.0"})]})}),n(e.tbody,{children:[n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"anyAsync"})}),n(e.td,{children:n(c,{href:"/api/any/",children:n(e.code,{children:"any"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"BaseSchema"})}),n(e.td,{children:n(c,{href:"/api/GenericSchema/",children:n(e.code,{children:"GenericSchema"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"bigintAsync"})}),n(e.td,{children:n(c,{href:"/api/bigint/",children:n(e.code,{children:"bigint"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"blobAsync"})}),n(e.td,{children:n(c,{href:"/api/blob/",children:n(e.code,{children:"blob"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"booleanAsync"})}),n(e.td,{children:n(c,{href:"/api/boolean/",children:n(e.code,{children:"boolean"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"custom"})}),n(e.td,{children:n(c,{href:"/api/check/",children:n(e.code,{children:"check"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"customAsync"})}),n(e.td,{children:n(c,{href:"/api/checkAsync/",children:n(e.code,{children:"checkAsync"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"coerce"})}),n(e.td,{children:[n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})}),", ",n(c,{href:"/api/unknown/",children:n(e.code,{children:"unknown"})})," and ",n(c,{href:"/api/transform/",children:n(e.code,{children:"transform"})})]})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"dateAsync"})}),n(e.td,{children:n(c,{href:"/api/date/",children:n(e.code,{children:"date"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"enumAsync"})}),n(e.td,{children:n(c,{href:"/api/enum/",children:n(e.code,{children:"enum_"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"Input"})}),n(e.td,{children:n(c,{href:"/api/InferInput/",children:n(e.code,{children:"InferInput"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"instanceAsync"})}),n(e.td,{children:n(c,{href:"/api/instance/",children:n(e.code,{children:"instance"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"literalAsync"})}),n(e.td,{children:n(c,{href:"/api/literal/",children:n(e.code,{children:"literal"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"nanAsync"})}),n(e.td,{children:n(c,{href:"/api/nan/",children:n(e.code,{children:"nan"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"neverAsync"})}),n(e.td,{children:n(c,{href:"/api/never/",children:n(e.code,{children:"never"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"nullAsync"})}),n(e.td,{children:n(c,{href:"/api/null/",children:n(e.code,{children:"null_"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"numberAsync"})}),n(e.td,{children:n(c,{href:"/api/number/",children:n(e.code,{children:"number"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"Output"})}),n(e.td,{children:n(c,{href:"/api/InferOutput/",children:n(e.code,{children:"InferOutput"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"picklistAsync"})}),n(e.td,{children:n(c,{href:"/api/picklist/",children:n(e.code,{children:"picklist"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"SchemaConfig"})}),n(e.td,{children:n(c,{href:"/api/Config/",children:n(e.code,{children:"Config"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"special"})}),n(e.td,{children:n(c,{href:"/api/custom/",children:n(e.code,{children:"custom"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"specialAsync"})}),n(e.td,{children:n(c,{href:"/api/customAsync/",children:n(e.code,{children:"customAsync"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"SchemaConfig"})}),n(e.td,{children:n(c,{href:"/api/string/",children:n(e.code,{children:"Config"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"stringAsync"})}),n(e.td,{children:n(c,{href:"/api/string/",children:n(e.code,{children:"string"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"symbolAsync"})}),n(e.td,{children:n(c,{href:"/api/symbol/",children:n(e.code,{children:"symbol"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"undefinedAsync"})}),n(e.td,{children:n(c,{href:"/api/undefined/",children:n(e.code,{children:"undefined_"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"unknownAsync"})}),n(e.td,{children:n(c,{href:"/api/unknown/",children:n(e.code,{children:"unknown"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"toCustom"})}),n(e.td,{children:n(c,{href:"/api/transform/",children:n(e.code,{children:"transform"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"toTrimmed"})}),n(e.td,{children:n(c,{href:"/api/trim/",children:n(e.code,{children:"trim"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"toTrimmedEnd"})}),n(e.td,{children:n(c,{href:"/api/trimEnd/",children:n(e.code,{children:"trimEnd"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"toTrimmedStart"})}),n(e.td,{children:n(c,{href:"/api/trimStart/",children:n(e.code,{children:"trimStart"})})})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"voidAsync"})}),n(e.td,{children:n(c,{href:"/api/void/",children:n(e.code,{children:"void_"})})})]})]})]})}),`
`,n(e.h2,{id:"special-cases",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#special-cases",children:n(e.span,{class:"icon icon-link"})}),"Special cases"]}),`
`,n(e.p,{children:"More complex schemas may require a bit more restructuring. This section provides more details on how to migrate specific functions."}),`
`,n(e.h3,{id:"objects-and-tuples",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#objects-and-tuples",children:n(e.span,{class:"icon icon-link"})}),"Objects and tuples"]}),`
`,n(e.p,{children:["Previously, you could pass a ",n(e.code,{children:"rest"})," argument to the ",n(c,{href:"/api/object/",children:n(e.code,{children:"object"})})," and ",n(c,{href:"/api/tuple/",children:n(e.code,{children:"tuple"})})," schemas to define the behavior for unknown entries and items. We have removed the ",n(e.code,{children:"rest"})," argument to simplify the implementation and reduce the bundle size if this functionality is not needed. If you do need this functionality, there is now a new ",n(c,{href:"/api/objectWithRest/",children:n(e.code,{children:"objectWithRest"})})," and ",n(c,{href:"/api/tupleWithRest/",children:n(e.code,{children:"tupleWithRest"})})," schema."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"null_"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"TupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"null_"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"objectWithRest"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"null_"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"TupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tupleWithRest"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"null_"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["To further improve the developer experience, we have also added a ",n(c,{href:"/api/looseObject/",children:n(e.code,{children:"looseObject"})}),", ",n(c,{href:"/api/looseTuple/",children:n(e.code,{children:"looseTuple"})}),", ",n(c,{href:"/api/strictObject/",children:n(e.code,{children:"strictObject"})})," and ",n(c,{href:"/api/strictTuple/",children:n(e.code,{children:"strictTuple"})})," schema. These schemas allow or disallow unknown entries or items."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"LooseObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"unknown"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"LooseTupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"unknown"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"StrictObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"never"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"StrictTupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"never"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"LooseObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"looseObject"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"LooseTupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"looseTuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"StrictObjectSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"strictObject"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"StrictTupleSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"strictTuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"object-merging",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#object-merging",children:n(e.span,{class:"icon icon-link"})}),"Object merging"]}),`
`,n(e.p,{children:["Since there are now 4 different object schemas, we could no longer provide a simple ",n(e.code,{children:"merge"})," function that works in all cases, as we never know which schema you want to merge the other objects into. But there is a simple workaround with a similar developer experience."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ObjectSchema1"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," foo",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ObjectSchema2"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," bar",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"MergedObject"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"merge"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),n(e.span,{class:"token maybe-class-name",children:"ObjectSchema1"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ObjectSchema2"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"MergedObject"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token spread operator",children:"..."}),n(e.span,{class:"token maybe-class-name",children:"ObjectSchema1"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"entries"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token spread operator",children:"..."}),n(e.span,{class:"token maybe-class-name",children:"ObjectSchema2"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"entries"}),n(e.span,{class:"token punctuation",children:","}),`
`,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"brand-and-transform",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#brand-and-transform",children:n(e.span,{class:"icon icon-link"})}),"Brand and transform"]}),`
`,n(e.p,{children:["Previously, ",n(c,{href:"/api/brand/",children:n(e.code,{children:"brand"})})," and ",n(c,{href:"/api/transform/",children:n(e.code,{children:"transform"})})," were methods that could be wrapped around a schema to modify it. With our new ",n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," method, this is no longer necessary. Instead, ",n(c,{href:"/api/brand/",children:n(e.code,{children:"brand"})})," and ",n(c,{href:"/api/transform/",children:n(e.code,{children:"transform"})})," are now transformation actions that can be placed directly in a pipeline, resulting in better readability, especially for complex schemas."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"BrandedSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"brand"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:"'foo'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"TransformedSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"length"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"BrandedSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"brand"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'foo'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"TransformedSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"length"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"coerce-method",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#coerce-method",children:n(e.span,{class:"icon icon-link"})}),"Coerce method"]}),`
`,n(e.p,{children:["The ",n(e.code,{children:"coerce"})," method has been removed because we felt it was an insecure API. In most cases, you don't want to coerce an unknown input into a specific data type. Instead, you want to transform a specific data type into another specific data type. For example, a string or a number into a date. To explicitly define the input type, we recommend using the new ",n(c,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," method together with the ",n(c,{href:"/api/transform/",children:n(e.code,{children:"transform"})})," action to achieve the same functionality."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"DateSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"coerce"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"date"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token keyword",children:"new"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token known-class-name class-name",children:"Date"})}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"DateSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"union"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token keyword",children:"new"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token known-class-name class-name",children:"Date"})}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"flatten-issues",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#flatten-issues",children:n(e.span,{class:"icon icon-link"})}),"Flatten issues"]}),`
`,n(e.p,{children:["Previously, the ",n(c,{href:"/api/flatten/",children:n(e.code,{children:"flatten"})})," function accepted a ",n(c,{href:"/api/ValiError/",children:n(e.code,{children:"ValiError"})})," or an array of issues. We have simplified the implementation by only allowing an array of issues to be passed."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token comment",children:"// Change this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," flatErrors ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"flatten"}),n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// To this"}),`
`,n(e.span,{class:"token keyword",children:"const"})," flatErrors ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"flatten"}),n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"issues"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})})]})}const m=(s={})=>{const e=t(a,{children:t(l,s,3,null)},3,"PNFvk1Cu");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{m as default,k as frontmatter,u as head,h as headings};
