import{R as a,a as t,s as c,t as e,q as i}from"./q-dgQLQ9M1.js";import{u as o}from"./q-CyNgVds-.js";const l="/assets/BFehhP7t-npm-downloads.webp 200w, /assets/C63B8dyb-npm-downloads.webp 400w, /assets/CfbWTvjn-npm-downloads.webp 600w, /assets/6Qoxlkki-npm-downloads.webp 800w, /assets/DXaa1jys-npm-downloads.webp 1200w",r=1200,p=622,u={srcSet:l,width:r,height:p};function h(s,n,k,m){return a("img",{decoding:"async",loading:"lazy",...s},u,void 0,3,n)}const b=[{text:"Current pain points",id:"current-pain-points",level:2},{text:"The pipe function",id:"the-pipe-function",level:2},{text:"The advantages",id:"the-advantages",level:2},{text:"The disadvantages",id:"the-disadvantages",level:2},{text:"Let's discuss",id:"lets-discuss",level:2}],y={title:"Should we change Valibot's API?",meta:[{name:"description",content:"Today I am writing this message to you to discuss the further development of Valibot's API."}],styles:[],links:[],scripts:[],frontmatter:{cover:"API Design",published:"2024-02-29",authors:["fabian-hiller","Demivan","xcfox"]}},w={cover:"API Design",title:"Should we change Valibot's API?",description:"Today I am writing this message to you to discuss the further development of Valibot's API.",published:"2024-02-29",authors:["fabian-hiller","Demivan","xcfox"]};function d(s){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",span:"span",...o(),...s.components};return e(i,{children:[e(n.p,{children:["Hi folks, I am ",e(n.a,{href:"https://github.com/fabian-hiller",rel:"noreferrer",target:"_blank",children:"Fabian"}),", the creator and maintainer of Valibot. Today I am writing this message to you to discuss the further development of Valibot's API. With currently more than 80,000 weekly downloads, the library is growing into a serious open source project used by thousands of JavaScript and TypeScript developers around the world."]}),`
`,e(h,{alt:"Daily downloads from August 2023 to March 2024"}),`
`,e(n.p,{children:["In the last few days I received two ",e(n.a,{href:"https://github.com/fabian-hiller/valibot/discussions/453",rel:"noreferrer",target:"_blank",children:"API proposals"})," from ",e(n.a,{href:"https://github.com/Demivan",rel:"noreferrer",target:"_blank",children:"@Demivan"})," and ",e(n.a,{href:"https://github.com/xcfox",rel:"noreferrer",target:"_blank",children:"@xcfox"}),". Both of them addressed similar pain points of Valibot's current API design. As our v1 release is getting closer and closer, it is important to me to involve the community in such a big decision."]}),`
`,e(n.h2,{id:"current-pain-points",children:[e(n.a,{"aria-hidden":"true",tabindex:"-1",href:"#current-pain-points",children:e(n.span,{class:"icon icon-link"})}),"Current pain points"]}),`
`,e(n.p,{children:["Valibot's current mental model is divided into schemas, methods, validations, and transformations. Schemas validate data types like strings, numbers and objects. Methods are small utilities that help you use or modify a schema. Validations and transformations are used in the ",e(n.code,{children:"pipe"})," argument of a schema. They can make changes to the input and check other details, such as the formatting of a string."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"toTrimmed"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"email"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"endsWith"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token string",children:"'@example.com'"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["A drawback of this API design is that the current pipeline implementation is not modular. This increases the initial bundle size of simple schemas like ",e(n.a,{href:"https://valibot.dev/api/string/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"string"})})," by more than 200 bytes. This is almost 30% of the total bundle size."]}),`
`,e(n.p,{children:["Another pain point is that the current pipeline implementation does not allow you to transform the data type. This forced me to add a ",e(n.a,{href:"https://valibot.dev/api/transform/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"transform"})})," method, resulting in two places where transformations can happen."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"toTrimmed"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"decimal"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token punctuation",children:"("}),"input",e(n.span,{class:"token punctuation",children:")"})," ",e(n.span,{class:"token arrow operator",children:"=>"})," ",e(n.span,{class:"token punctuation",children:"{"}),`
  `,e(n.span,{class:"token keyword control-flow",children:"return"})," ",e(n.span,{class:"token function",children:"parseInt"}),e(n.span,{class:"token punctuation",children:"("}),"input",e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`,e(n.span,{class:"token punctuation",children:"}"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:"Speaking of methods, it can quickly become confusing if you need to apply multiple methods to the same schema, as these functions must always be nested."}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"LengthSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"brand"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"optional"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token string",children:"''"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token punctuation",children:"("}),"input",e(n.span,{class:"token punctuation",children:")"})," ",e(n.span,{class:"token arrow operator",children:"=>"})," input",e(n.span,{class:"token punctuation",children:"."}),e(n.span,{class:"token property-access",children:"length"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token string",children:"'Length'"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["The last pain point that comes to mind is that the current API design gives you less control over the input and output type of a schema. When working with form libraries, it can be useful to have an input type of ",e(n.code,{children:"string | null"})," for the initial values, but an output type of just ",e(n.code,{children:"string"})," for a required field."]}),`
`,e(n.h2,{id:"the-pipe-function",children:[e(n.a,{"aria-hidden":"true",tabindex:"-1",href:"#the-pipe-function",children:e(n.span,{class:"icon icon-link"})}),"The ",e(n.code,{children:"pipe"})," function"]}),`
`,e(n.p,{children:["After several design iterations, ",e(n.a,{href:"https://github.com/Demivan",rel:"noreferrer",target:"_blank",children:"@Demivan"})," came up with the idea of a ",e(n.code,{children:"pipe"})," function. Similar to the current ",e(n.code,{children:"pipe"})," argument, it can be used for validations and transformations. The first argument is always a schema, followed by various actions or schemas."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With the new `pipe` function"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"LoginSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"object"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"{"}),`
  email`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"minLength"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token number",children:"1"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"email"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  password`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"minLength"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token number",children:"8"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
`,e(n.span,{class:"token punctuation",children:"}"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`

`,e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"LoginSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"object"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"{"}),`
  email`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"minLength"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token number",children:"1"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"email"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  password`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"minLength"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token number",children:"8"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
`,e(n.span,{class:"token punctuation",children:"}"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["The big difference is that the ",e(n.code,{children:"pipe"})," function also allows you to transform the data type. This would allow us to move methods like ",e(n.a,{href:"https://valibot.dev/api/transform/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"transform"})})," and ",e(n.a,{href:"https://valibot.dev/api/brand/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"brand"})})," into the pipeline. This prevents nesting of functions for these methods and simplifies the mental model."]}),`
`,e(n.p,{children:["With the ",e(n.code,{children:"pipe"})," function, the mental model is reduced to schemas, methods, and actions. Actions are always used within the ",e(n.code,{children:"pipe"})," function to further validate and transform the input and type of a schema."]}),`
`,e(n.blockquote,{children:[`
`,e(n.p,{children:["Alternative names for ",e(n.code,{children:"pipe"})," are ",e(n.code,{children:"flow"})," (idea by ",e(n.a,{href:"https://github.com/mtt-artis",rel:"noreferrer",target:"_blank",children:"@mtt-artis"}),"), ",e(n.code,{children:"schema"})," (idea by ",e(n.a,{href:"https://github.com/genki",rel:"noreferrer",target:"_blank",children:"@genki"}),"), ",e(n.code,{children:"compose"})," (idea by ",e(n.a,{href:"https://github.com/MohammedEsafi",rel:"noreferrer",target:"_blank",children:"@MohammedEsafi"}),"), and ",e(n.code,{children:"vali"})," (idea by ",e(n.a,{href:"https://github.com/Hugos68",rel:"noreferrer",target:"_blank",children:"@Hugos68"}),"). Please ",e(n.a,{href:"https://github.com/fabian-hiller/valibot/discussions/463",rel:"noreferrer",target:"_blank",children:"share"})," your thoughts."]}),`
`]}),`
`,e(n.h2,{id:"the-advantages",children:[e(n.a,{"aria-hidden":"true",tabindex:"-1",href:"#the-advantages",children:e(n.span,{class:"icon icon-link"})}),"The advantages"]}),`
`,e(n.p,{children:["The ",e(n.code,{children:"pipe"})," function makes Valibot even more modular, resulting in a smaller bundle size for very simple schemas without a pipeline. For very complex schemas it reduces function nesting when using ",e(n.a,{href:"https://valibot.dev/api/transform/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"transform"})})," and ",e(n.a,{href:"https://valibot.dev/api/brand/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"brand"})}),"."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With the new `pipe` function"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"LengthSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"optional"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token string",children:"''"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"("}),"input",e(n.span,{class:"token punctuation",children:")"})," ",e(n.span,{class:"token arrow operator",children:"=>"})," input",e(n.span,{class:"token punctuation",children:"."}),e(n.span,{class:"token property-access",children:"length"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"brand"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token string",children:"'Length'"}),e(n.span,{class:"token punctuation",children:")"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`

`,e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"LengthSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"brand"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"optional"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token string",children:"''"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token punctuation",children:"("}),"input",e(n.span,{class:"token punctuation",children:")"})," ",e(n.span,{class:"token arrow operator",children:"=>"})," input",e(n.span,{class:"token punctuation",children:"."}),e(n.span,{class:"token property-access",children:"length"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token string",children:"'Length'"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["It also gives you more control over the input and output type, and simplifies the mental model by eliminating the confusion between the ",e(n.a,{href:"https://valibot.dev/api/transform/",rel:"noreferrer",target:"_blank",children:e(n.code,{children:"transform"})})," method and the pipeline transformations of the current API."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With the new `pipe` function"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"toTrimmed"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"decimal"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),"parseInt",e(n.span,{class:"token punctuation",children:")"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`

`,e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"toTrimmed"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"decimal"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  parseInt
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["Besides that, the ",e(n.code,{children:"pipe"})," function would also allow us to easily add a ",e(n.a,{href:"https://github.com/fabian-hiller/valibot/issues/373",rel:"noreferrer",target:"_blank",children:"metadata feature"})," to Valibot. This could be interesting when working with databases to define SQL properties like ",e(n.code,{children:"PRIMARY KEY"}),"."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With the new `pipe` function"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"UserSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"object"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"{"}),`
    id`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"uuid"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"primaryKey"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
    name`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"maxLength"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token number",children:"32"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"unique"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
    bio`,e(n.span,{class:"token operator",children:":"})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"description"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token string",children:"'Text ...'"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token punctuation",children:"}"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"table"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token string",children:"'users'"}),e(n.span,{class:"token punctuation",children:")"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.h2,{id:"the-disadvantages",children:[e(n.a,{"aria-hidden":"true",tabindex:"-1",href:"#the-disadvantages",children:e(n.span,{class:"icon icon-link"})}),"The disadvantages"]}),`
`,e(n.p,{children:["The main disadvantage of the ",e(n.code,{children:"pipe"})," function is that it requires a bit more code to write for medium sized schemas, and for more complex schemas you may end up nesting multiple pipelines."]}),`
`,e(n.pre,{class:"language-ts",children:e(n.code,{class:"language-ts",children:[e(n.span,{class:"token comment",children:"// With the new `pipe` function"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"union"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"decimal"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"pipe"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token function",children:"number"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"integer"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token known-class-name class-name",children:"Number"}),e(n.span,{class:"token punctuation",children:")"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`

`,e(n.span,{class:"token comment",children:"// With Valibot's current API"}),`
`,e(n.span,{class:"token keyword",children:"const"})," ",e(n.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",e(n.span,{class:"token operator",children:"="})," ",e(n.span,{class:"token function",children:"transform"}),e(n.span,{class:"token punctuation",children:"("}),`
  `,e(n.span,{class:"token function",children:"union"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"string"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"decimal"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","})," ",e(n.span,{class:"token function",children:"number"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:"["}),e(n.span,{class:"token function",children:"integer"}),e(n.span,{class:"token punctuation",children:"("}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:"]"}),e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:","}),`
  `,e(n.span,{class:"token known-class-name class-name",children:"Number"}),`
`,e(n.span,{class:"token punctuation",children:")"}),e(n.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,e(n.h2,{id:"lets-discuss",children:[e(n.a,{"aria-hidden":"true",tabindex:"-1",href:"#lets-discuss",children:e(n.span,{class:"icon icon-link"})}),"Let's discuss"]}),`
`,e(n.p,{children:[`Your opinion matters to me. I encourage everyone to share their thoughts. Even quick feedback like "I like this ... and I don't like that ..." is welcome and will help to shape Valibot's future API design. Please discuss with me on `,e(n.a,{href:"https://github.com/fabian-hiller/valibot/discussions/463",rel:"noreferrer",target:"_blank",children:"GitHub"})," or share your thoughts on ",e(n.a,{href:"https://x.com/FabianHiller/status/1763253086464639035",rel:"noreferrer",target:"_blank",children:"Twitter"}),"."]})]})}const v=(s={})=>{const n=t(c,{children:t(d,s,3,null)},3,"I9HWpzEk");return typeof MDXLayout=="function"?e(MDXLayout,{children:n}):n};export{v as default,w as frontmatter,y as head,b as headings};
