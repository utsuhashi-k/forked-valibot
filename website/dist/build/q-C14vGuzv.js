import{a as t,s as c,t as n,q as o}from"./q-dgQLQ9M1.js";import{u as l}from"./q-CyNgVds-.js";import{L as s}from"./q-BuauhHiJ.js";const h=[{text:"Convert input or output of schema",id:"convert-input-or-output-of-schema",level:2},{text:"Override default JSON Schema conversion",id:"override-default-json-schema-conversion",level:2},{text:"New global definition storage",id:"new-global-definition-storage",level:2},{text:"Output schema definitions only",id:"output-schema-definitions-only",level:2},{text:"Enhanced metadata support",id:"enhanced-metadata-support",level:2},{text:"What's next?",id:"whats-next",level:2}],u={title:"JSON Schema package upgrade",meta:[{name:"description",content:'This blog post introduces new configurations such as "typeMode" and "overrideSchema", as well as the new "toJsonSchemaDefs" function, which were added in the last two minor versions.'}],styles:[],links:[],scripts:[],frontmatter:{cover:"JSON Schema",published:"2025-06-01",authors:["fabian-hiller"]}},m={cover:"JSON Schema",title:"JSON Schema package upgrade",description:'This blog post introduces new configurations such as "typeMode" and "overrideSchema", as well as the new "toJsonSchemaDefs" function, which were added in the last two minor versions.',published:"2025-06-01",authors:["fabian-hiller"]};function i(a){const e={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",span:"span",...l(),...a.components};return n(o,{children:[n(e.p,{children:["Valibot's ",n(e.a,{href:"https://github.com/fabian-hiller/valibot/tree/main/packages/to-json-schema",rel:"noreferrer",target:"_blank",children:"JSON Schema package"})," has seen significant growth in adoption over the past few weeks, reaching almost 200,000 monthly downloads on npm. We believe it is particularly popular for documentation and code generation purposes via the OpenAPI specification, as well as for generating structured LLM outputs."]}),`
`,n(e.p,{children:"As these use cases will probably become more common in future, we have listened to your feedback and decided to invest more time in developing the package to make it extremely powerful. This blog post will introduce the new features added in the last two minor versions."}),`
`,n(e.h2,{id:"convert-input-or-output-of-schema",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#convert-input-or-output-of-schema",children:n(e.span,{class:"icon icon-link"})}),"Convert input or output of schema"]}),`
`,n(e.p,{children:["The JSON Schema package now supports a new ",n(e.code,{children:"typeMode"})," configuration option, which allows you to specify whether you want to convert the input or output of a Valibot schema."]}),`
`,n(e.p,{children:"This is particularly useful when validating and defining an API endpoint with Valibot and your schemas contain transformations. This is because external developers are usually interested in the input schema of the request data but in the output schema of the response data."}),`
`,`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," toJsonSchema ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'@valibot/to-json-schema'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"decimal"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token known-class-name class-name",children:"Number"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"maxValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token number",children:"100"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"toJsonSchema"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"{"})," typeMode",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'input'"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   $schema: "http://json-schema.org/draft-07/schema#",'}),`
`,n(e.span,{class:"token comment",children:'//   type: "string",'}),`
`,n(e.span,{class:"token comment",children:'//   pattern: "^[+-]?(?:\\\\d*\\\\.)?\\\\d+$"'}),`
`,n(e.span,{class:"token comment",children:"// }"}),`

`,n(e.span,{class:"token function",children:"toJsonSchema"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"{"})," typeMode",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'output'"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   $schema: "http://json-schema.org/draft-07/schema#",'}),`
`,n(e.span,{class:"token comment",children:'//   type: "number",'}),`
`,n(e.span,{class:"token comment",children:"//   maximum: 100"}),`
`,n(e.span,{class:"token comment",children:"// }"}),`
`]})}),`
`,n(e.h2,{id:"override-default-json-schema-conversion",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#override-default-json-schema-conversion",children:n(e.span,{class:"icon icon-link"})}),"Override default JSON Schema conversion"]}),`
`,n(e.p,{children:["The JSON Schema package now enables you to override the default behaviour of the JSON Schema conversion process. This can be achieved using the three new configuration options: ",n(e.code,{children:"overrideSchema"}),", ",n(e.code,{children:"overrideAction"})," and ",n(e.code,{children:"overrideRef"}),". These let you specify a custom function that will be called for each schema, action or reference during conversion."]}),`
`,n(e.p,{children:["You can either return a value to override the default behaviour, or return ",n(e.code,{children:"null"})," or ",n(e.code,{children:"undefined"})," to skip the override. Furthermore, all three callback functions provide the full context via the first function argument, enabling you to perform the same actions as we do internally."]}),`
`,`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," toJsonSchema ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'@valibot/to-json-schema'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," createdAt",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"date"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"toJsonSchema"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token function",children:"overrideSchema"}),n(e.span,{class:"token punctuation",children:"("}),"context",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
    `,n(e.span,{class:"token keyword control-flow",children:"if"})," ",n(e.span,{class:"token punctuation",children:"("}),"context",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"valibotSchema"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"type"})," ",n(e.span,{class:"token operator",children:"==="})," ",n(e.span,{class:"token string",children:"'date'"}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
      `,n(e.span,{class:"token keyword control-flow",children:"return"})," ",n(e.span,{class:"token punctuation",children:"{"})," type",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'string'"}),n(e.span,{class:"token punctuation",children:","})," format",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'date-time'"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:";"}),`
    `,n(e.span,{class:"token punctuation",children:"}"}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
`,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   $schema: "http://json-schema.org/draft-07/schema#",'}),`
`,n(e.span,{class:"token comment",children:'//   type: "object",'}),`
`,n(e.span,{class:"token comment",children:"//   properties: {"}),`
`,n(e.span,{class:"token comment",children:'//     createdAt: { type: "string" format: "date-time" }'}),`
`,n(e.span,{class:"token comment",children:"//   },"}),`
`,n(e.span,{class:"token comment",children:'//   required: ["createdAt"]'}),`
`,n(e.span,{class:"token comment",children:"// }"}),`
`]})}),`
`,n(e.h2,{id:"new-global-definition-storage",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#new-global-definition-storage",children:n(e.span,{class:"icon icon-link"})}),"New global definition storage"]}),`
`,n(e.p,{children:"If you are reusing Valibot schemas within other Valibot schemas, you may be interested in representing these schemas as references in the JSON Schema output. To facilitate this, the JSON Schema package now includes a new global definition storage."}),`
`,n(e.p,{children:["This feature allows you to define these definitions after creating a Valibot schema, rather than when calling ",n(e.code,{children:"toJsonSchema"}),". This can be particularly useful for larger projects with many schemas, as it helps to keep your code clean and organised."]}),`
`,`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," addGlobalDefs",n(e.span,{class:"token punctuation",children:","})," toJsonSchema ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'@valibot/to-json-schema'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"addGlobalDefs"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema3"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"toJsonSchema"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema3"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   $schema: "http://json-schema.org/draft-07/schema#",'}),`
`,n(e.span,{class:"token comment",children:'//   type: "array",'}),`
`,n(e.span,{class:"token comment",children:"//   items: ["}),`
`,n(e.span,{class:"token comment",children:'//     { $ref: "#/$defs/ValibotSchema1" },'}),`
`,n(e.span,{class:"token comment",children:'//     { $ref: "#/$defs/ValibotSchema2" }'}),`
`,n(e.span,{class:"token comment",children:"//   ],"}),`
`,n(e.span,{class:"token comment",children:"//   minItems: 2,"}),`
`,n(e.span,{class:"token comment",children:"//   $defs: {"}),`
`,n(e.span,{class:"token comment",children:'//     ValibotSchema1: { type: "string" },'}),`
`,n(e.span,{class:"token comment",children:'//     ValibotSchema2: { type: "number" }'}),`
`,n(e.span,{class:"token comment",children:"//   }"}),`
`,n(e.span,{class:"token comment",children:"// }"}),`
`]})}),`
`,n(e.h2,{id:"output-schema-definitions-only",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#output-schema-definitions-only",children:n(e.span,{class:"icon icon-link"})}),"Output schema definitions only"]}),`
`,n(e.p,{children:["If you're working with the OpenAPI specification, you might be interested in generating only the JSON Schema definitions and overriding the reference IDs to customise them. The new ",n(e.code,{children:"toJsonSchemaDefs"})," function and ",n(e.code,{children:"overrideRef"})," configuration option now make this possible."]}),`
`,`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," toJsonSchemaDefs ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'@valibot/to-json-schema'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema3"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"tuple"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"toJsonSchemaDefs"}),n(e.span,{class:"token punctuation",children:"("}),`
  `,n(e.span,{class:"token punctuation",children:"{"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema1"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema2"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema3"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"{"})," ",n(e.span,{class:"token function-variable function",children:"overrideRef"}),n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token punctuation",children:"("}),"context",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token template-string",children:[n(e.span,{class:"token template-punctuation string",children:"`"}),n(e.span,{class:"token string",children:"#/schemas/"}),n(e.span,{class:"token interpolation",children:[n(e.span,{class:"token interpolation-punctuation punctuation",children:"${"}),"context",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"referenceId"}),n(e.span,{class:"token interpolation-punctuation punctuation",children:"}"})]}),n(e.span,{class:"token template-punctuation string",children:"`"})]})," ",n(e.span,{class:"token punctuation",children:"}"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   ValibotSchema1: { type: "string" },'}),`
`,n(e.span,{class:"token comment",children:'//   ValibotSchema2: { type: "number" },'}),`
`,n(e.span,{class:"token comment",children:"//   ValibotSchema3: {"}),`
`,n(e.span,{class:"token comment",children:'//     type: "array",'}),`
`,n(e.span,{class:"token comment",children:"//     items: ["}),`
`,n(e.span,{class:"token comment",children:'//       { $ref: "#/schemas/ValibotSchema1" },'}),`
`,n(e.span,{class:"token comment",children:'//       { $ref: "#/schemas/ValibotSchema2" }'}),`
`,n(e.span,{class:"token comment",children:"//     ],"}),`
`,n(e.span,{class:"token comment",children:"//     minItems: 2"}),`
`,n(e.span,{class:"token comment",children:"//   }"}),`
`,n(e.span,{class:"token comment",children:"// }"}),`
`]})}),`
`,n(e.p,{children:["You can also convert global definitions added via the new ",n(e.code,{children:"addGlobalDefs"})," function. To do this, call ",n(e.code,{children:"getGlobalDefs"})," to retrieve the definitions and pass them as the first argument to ",n(e.code,{children:"toJsonSchemaDefs"}),"."]}),`
`,n(e.h2,{id:"enhanced-metadata-support",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#enhanced-metadata-support",children:n(e.span,{class:"icon icon-link"})}),"Enhanced metadata support"]}),`
`,n(e.p,{children:["Previously we only supported the ",n(s,{href:"/api/title/",children:n(e.code,{children:"title"})})," and ",n(s,{href:"/api/description/",children:n(e.code,{children:"description"})})," action directly but not the generic ",n(s,{href:"/api/metadata/",children:n(e.code,{children:"metadata"})})," action. This was improved so that title, description and examples can now also be specified via the generic ",n(s,{href:"/api/metadata/",children:n(e.code,{children:"metadata"})})," action, providing you with more flexibility in defining your schemas."]}),`
`,`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," toJsonSchema ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'@valibot/to-json-schema'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"metadata"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    title`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'Email Schema'"}),n(e.span,{class:"token punctuation",children:","}),`
    description`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'A schema that validates email addresses.'"}),n(e.span,{class:"token punctuation",children:","}),`
    examples`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token punctuation",children:"["}),n(e.span,{class:"token string",children:"'jane@example.com'"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token function",children:"toJsonSchema"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"ValibotSchema"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// {"}),`
`,n(e.span,{class:"token comment",children:'//   $schema: "http://json-schema.org/draft-07/schema#",'}),`
`,n(e.span,{class:"token comment",children:'//   type: "string",'}),`
`,n(e.span,{class:"token comment",children:'//   format: "email",'}),`
`,n(e.span,{class:"token comment",children:'//   title: "Email Schema",'}),`
`,n(e.span,{class:"token comment",children:'//   description: "A schema that validates email addresses.",'}),`
`,n(e.span,{class:"token comment",children:'//   examples: ["jane@example.com"]'}),`
`,n(e.span,{class:"token comment",children:"// }"}),`
`]})}),`
`,n(e.h2,{id:"whats-next",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#whats-next",children:n(e.span,{class:"icon icon-link"})}),"What's next?"]}),`
`,n(e.p,{children:["Firstly, I would like to thank ",n(e.a,{href:"https://github.com/Xiot",rel:"noreferrer",target:"_blank",children:"@Xiot"})," for his detailed feedback on the JSON Schema package and all the new changes. His help in identifying edge cases and advising on the API design was invaluable."]}),`
`,n(e.p,{children:"Next, we will probably release the Zod-to-Valibot codemod to help you migrate to Valibot if you are interested. Stay tuned for that!"})]})}const k=(a={})=>{const e=t(c,{children:t(i,a,3,null)},3,"7RohINRJ");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{k as default,m as frontmatter,u as head,h as headings};
