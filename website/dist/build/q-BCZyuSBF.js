import{a as t,s as o,t as n,q as i}from"./q-dgQLQ9M1.js";import{u as c}from"./q-CyNgVds-.js";import{L as s}from"./q-BuauhHiJ.js";const p=[{text:"Async validation",id:"async-validation",level:1},{text:"How it works",id:"how-it-works",level:2},{text:"Naming",id:"naming",level:3},{text:"Nesting",id:"nesting",level:3},{text:"Rule of thumb",id:"rule-of-thumb",level:4},{text:"Example",id:"example",level:3}],u={title:"Async validation",meta:[{name:"description",content:"By default, Valibot validates each schema synchronously. This is usually the fastest way to validate unknown data, but sometimes you need to validate something asynchronously."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller"]}},m={title:"Async validation",description:"By default, Valibot validates each schema synchronously. This is usually the fastest way to validate unknown data, but sometimes you need to validate something asynchronously.",contributors:["fabian-hiller"]};function l(a){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",span:"span",...c(),...a.components};return n(i,{children:[n(e.h1,{id:"async-validation",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#async-validation",children:n(e.span,{class:"icon icon-link"})}),"Async validation"]}),`
`,n(e.p,{children:"By default, Valibot validates each schema synchronously. This is usually the fastest way to validate unknown data, but sometimes you need to validate something asynchronously. For example, you might want to check if a username already exists in your database."}),`
`,n(e.h2,{id:"how-it-works",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#how-it-works",children:n(e.span,{class:"icon icon-link"})}),"How it works"]}),`
`,n(e.p,{children:"To be able to do this, Valibot provides an asynchronous implementation when necessary. The only difference is that the asynchronous implementation is promise-based. Otherwise, the API and functionality is exactly the same."}),`
`,n(e.h3,{id:"naming",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#naming",children:n(e.span,{class:"icon icon-link"})}),"Naming"]}),`
`,n(e.p,{children:["The asynchronous implementation starts with the same name as the synchronous one, but adds the suffix ",n(e.code,{children:"Async"})," to the end. For example, the asynchronous implementation of ",n(s,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," is called ",n(s,{href:"/api/pipeAsync/",children:n(e.code,{children:"pipeAsync"})})," and the asynchronous implementation of ",n(s,{href:"/api/object/",children:n(e.code,{children:"object"})})," is called ",n(s,{href:"/api/objectAsync/",children:n(e.code,{children:"objectAsync"})}),"."]}),`
`,n(e.h3,{id:"nesting",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#nesting",children:n(e.span,{class:"icon icon-link"})}),"Nesting"]}),`
`,n(e.p,{children:"Asynchronous functions can only be nested inside other asynchronous functions. This means that if you need to validate a string within an object asynchronously, you must also switch the object validation to the asynchronous implementation."}),`
`,n(e.p,{children:"This is not necessary in the other direction. You can nest synchronous functions within asynchronous functions, and we recommend that you do so in most cases to keep complexity and bundle size to a minimum."}),`
`,n(e.h4,{id:"rule-of-thumb",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#rule-of-thumb",children:n(e.span,{class:"icon icon-link"})}),"Rule of thumb"]}),`
`,n(e.p,{children:"We recommend that you always start with the synchronous implementation, and only move the necessary parts to the asynchronous implementation as needed. If you are using TypeScript, it is not possible to make a mistake here, as our API is completely type-safe and will notify you when you embed an asynchronous function into a synchronous function."}),`
`,n(e.h3,{id:"example",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#example",children:n(e.span,{class:"icon icon-link"})}),"Example"]}),`
`,n(e.p,{children:"Let's say you want to validate a profile object and the username should be checked asynchronously against your database. Only the object and username validation needs to be asynchronous, the rest can stay synchronous."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," isUsernameAvailable ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'~/api'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ProfileSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"objectAsync"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
  username`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipeAsync"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"checkAsync"}),n(e.span,{class:"token punctuation",children:"("}),"isUsernameAvailable",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  avatar`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"url"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  description`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"maxLength"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token number",children:"1000"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
`,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})})]})}const y=(a={})=>{const e=t(o,{children:t(l,a,3,null)},3,"c41wFZ_I");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{y as default,m as frontmatter,u as head,p as headings};
