import{a as c,s as i,t as n,q as o}from"./q-dgQLQ9M1.js";import{u as l}from"./q-CyNgVds-.js";import{L as a}from"./q-BuauhHiJ.js";import{a as t}from"./q-B70ZX59b.js";import"./q-JtBsCz9c.js";import"./q-CWbD2QRg.js";import"./q-B_zTzlEV.js";const y=[{text:"Pipelines",id:"pipelines",level:1},{text:"How it works",id:"how-it-works",level:2},{text:"Example",id:"example",level:3},{text:"Validations",id:"validations",level:2},{text:"Custom validation",id:"custom-validation",level:3},{text:"Transformations",id:"transformations",level:2},{text:"Custom transformation",id:"custom-transformation",level:3},{text:"Metadata",id:"metadata",level:2}],g={title:"Pipelines",meta:[{name:"description",content:"For detailed validations and transformations, a schema can be wrapped in a pipeline. This is useful to validate further details apart from the raw data type."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller","EltonLobo07","BastiDood","morinokami","jasperteo","daxeh","ariskemper"]}},v={title:"Pipelines",description:"For detailed validations and transformations, a schema can be wrapped in a pipeline. This is useful to validate further details apart from the raw data type.",contributors:["fabian-hiller","EltonLobo07","BastiDood","morinokami","jasperteo","daxeh","ariskemper"]};function r(s){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",...l(),...s.components};return n(o,{children:[n(e.h1,{id:"pipelines",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#pipelines",children:n(e.span,{class:"icon icon-link"})}),"Pipelines"]}),`
`,n(e.p,{children:["For detailed validations and transformations, a schema can be wrapped in a pipeline. Especially for schema functions like ",n(a,{href:"/api/string/",children:n(e.code,{children:"string"})}),", ",n(a,{href:"/api/number/",children:n(e.code,{children:"number"})}),", ",n(a,{href:"/api/date/",children:n(e.code,{children:"date"})}),", ",n(a,{href:"/api/object/",children:n(e.code,{children:"object"})}),", and ",n(a,{href:"/api/array/",children:n(e.code,{children:"array"})}),", this feature is useful for validating properties beyond the raw data type."]}),`
`,n(e.h2,{id:"how-it-works",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#how-it-works",children:n(e.span,{class:"icon icon-link"})}),"How it works"]}),`
`,n(e.p,{children:"In simple words, a pipeline is a list of schemas and actions that synchronously passes through the input data. It must always start with a schema, followed by up to 19 schemas or actions. Each schema and action can examine and modify the input. The pipeline is therefore perfect for detailed validations and transformations."}),`
`,n(e.h3,{id:"example",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#example",children:n(e.span,{class:"icon icon-link"})}),"Example"]}),`
`,n(e.p,{children:"For example, the pipeline feature can be used to trim a string and make sure that it is an email that ends with a specific domain."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"trim"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"endsWith"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'@example.com'"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h2,{id:"validations",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#validations",children:n(e.span,{class:"icon icon-link"})}),"Validations"]}),`
`,n(e.p,{children:"Pipeline validation actions examine the input and, if the input does not meet a certain condition, return an issue. If the input is valid, it is returned as the output and, if present, picked up by the next action in the pipeline."}),`
`,n(e.blockquote,{children:[`
`,n(e.p,{children:["Whenever possible, pipelines are run completely, even if an issue has occurred, to collect all possible issues. If you want to abort the pipeline early after the first issue, you need to set the ",n(e.code,{children:"abortPipeEarly"})," option to ",n(e.code,{children:"true"}),". Learn more about this ",n(a,{href:"/guides/parse-data/#configuration",children:"here"}),"."]}),`
`]}),`
`,n(t,{label:"Validation actions",items:["base64","bic","bytes","check","checkItems","creditCard","cuid2","decimal","digits","email","emoji","empty","endsWith","entries","everyItem","excludes","finite","graphemes","gtValue","hash","hexadecimal","hexColor","includes","integer","ip","ipv4","ipv6","isoDate","isoDateTime","isoTime","isoTimeSecond","isoTimestamp","isoWeek","length","ltValue","mac","mac48","mac64","maxBytes","maxEntries","maxGraphemes","maxLength","maxSize","maxValue","maxWords","mimeType","minBytes","minEntries","minGraphemes","minLength","minSize","minValue","minWords","multipleOf","nanoid","nonEmpty","notBytes","notEntries","notGraphemes","notLength","notSize","notValue","notValues","notWords","octal","parseJson","partialCheck","rawCheck","regex","rfcEmail","safeInteger","size","slug","someItem","startsWith","ulid","url","uuid","value","values","words"]}),`
`,n(e.p,{children:["Some of these actions can be combined with different schemas. For example, ",n(a,{href:"/api/minValue/",children:n(e.code,{children:"minValue"})})," can be used to validate the minimum value of ",n(a,{href:"/api/string/",children:n(e.code,{children:"string"})}),", ",n(a,{href:"/api/number/",children:n(e.code,{children:"number"})}),", ",n(a,{href:"/api/bigint/",children:n(e.code,{children:"bigint"})}),", and ",n(a,{href:"/api/date/",children:n(e.code,{children:"date"})}),"."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"StringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"minValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'foo'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"minValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token number",children:"1234"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"BigintSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"bigint"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"minValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token number",children:"1234n"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"DateSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"date"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"minValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token keyword",children:"new"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token known-class-name class-name",children:"Date"})}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"custom-validation",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#custom-validation",children:n(e.span,{class:"icon icon-link"})}),"Custom validation"]}),`
`,n(e.p,{children:["For custom validations, ",n(a,{href:"/api/check/",children:n(e.code,{children:"check"})})," can be used. If the function passed as the first argument returns ",n(e.code,{children:"false"}),", an issue is returned. Otherwise, the input is considered valid."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token punctuation",children:"{"})," isValidUsername ",n(e.span,{class:"token punctuation",children:"}"})]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'~/utils'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"UsernameSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"check"}),n(e.span,{class:"token punctuation",children:"("}),"isValidUsername",n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:"'This username is invalid.'"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.blockquote,{children:[`
`,n(e.p,{children:["You can forward the issues of a pipeline validation to a child. See the ",n(a,{href:"/guides/methods/#forward",children:"methods"})," guide for more information."]}),`
`]}),`
`,n(e.h2,{id:"transformations",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#transformations",children:n(e.span,{class:"icon icon-link"})}),"Transformations"]}),`
`,n(e.p,{children:"Pipeline transformation actions allow to change the value and data type of the input data. This can be useful for example to remove spaces at the beginning or end of a string or to force a minimum or maximum value."}),`
`,n(t,{label:"Transformation actions",items:["brand","filterItems","findItem","flavor","mapItems","rawTransform","readonly","reduceItems","sortItems","toLowerCase","toMaxValue","toMinValue","toUpperCase","transform","trim","trimEnd","trimStart"]}),`
`,n(e.p,{children:"For example, the pipeline of the following schema enforces a minimum value of 10. If the input is less than 10, it is replaced with the specified minimum value."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"toMinValue"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token number",children:"10"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h3,{id:"custom-transformation",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#custom-transformation",children:n(e.span,{class:"icon icon-link"})}),"Custom transformation"]}),`
`,n(e.p,{children:["For custom transformations, ",n(a,{href:"/api/transform/",children:n(e.code,{children:"transform"})})," can be used. The function passed as the first argument is called with the input data and the return value defines the output. The following transformation changes the output of the schema to ",n(e.code,{children:"null"})," for any number less than 10."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NumberSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token punctuation",children:"("}),"input ",n(e.span,{class:"token operator",children:"<"})," ",n(e.span,{class:"token number",children:"10"})," ",n(e.span,{class:"token operator",children:"?"})," ",n(e.span,{class:"token keyword null nil",children:"null"})," ",n(e.span,{class:"token operator",children:":"})," input",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h2,{id:"metadata",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#metadata",children:n(e.span,{class:"icon icon-link"})}),"Metadata"]}),`
`,n(e.p,{children:"In addition to the validation and transformation actions, a pipeline can also be used to add metadata to a schema. This can be useful when working with AI tools or for documentation purposes."}),`
`,n(t,{label:"Metadata actions",items:["description","metadata","title"]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"UsernameSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"regex"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token regex",children:[n(e.span,{class:"token regex-delimiter",children:"/"}),n(e.span,{class:"token regex-source language-regex",children:"^[a-z0-9_-]{4,16}$"}),n(e.span,{class:"token regex-delimiter",children:"/"}),n(e.span,{class:"token regex-flags",children:"iu"})]}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"title"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'Username'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"description"}),n(e.span,{class:"token punctuation",children:"("}),`
    `,n(e.span,{class:"token string",children:"'A username must be between 4 and 16 characters long and can only contain letters, numbers, underscores and hyphens.'"}),`
  `,n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})})]})}const b=(s={})=>{const e=c(i,{children:c(r,s,3,null)},3,"D3EvNsC3");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{b as default,v as frontmatter,g as head,y as headings};
