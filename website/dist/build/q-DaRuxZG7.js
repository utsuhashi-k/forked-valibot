import{a as c,s as t,t as n,q as l}from"./q-dgQLQ9M1.js";import{u as o}from"./q-CyNgVds-.js";import{L as a}from"./q-BuauhHiJ.js";const h=[{text:"Optionals",id:"optionals",level:1},{text:"How it works",id:"how-it-works",level:2},{text:"Use in objects",id:"use-in-objects",level:3},{text:"Default values",id:"default-values",level:2},{text:"Dynamic default values",id:"dynamic-default-values",level:3},{text:"Dependent default values",id:"dependent-default-values",level:3}],u={title:"Optionals",meta:[{name:"description",content:"It often happens that `undefined` or `null` should also be accepted. To make the API more readable for this and to reduce boilerplate, Valibot offers a shortcut."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller","EltonLobo07","fartinmartin"]}},k={title:"Optionals",description:"It often happens that `undefined` or `null` should also be accepted. To make the API more readable for this and to reduce boilerplate, Valibot offers a shortcut.",contributors:["fabian-hiller","EltonLobo07","fartinmartin"]};function i(s){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",...o(),...s.components};return n(l,{children:[n(e.h1,{id:"optionals",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#optionals",children:n(e.span,{class:"icon icon-link"})}),"Optionals"]}),`
`,n(e.p,{children:["It often happens that ",n(e.code,{children:"undefined"})," or ",n(e.code,{children:"null"})," should also be accepted instead of the value. To make the API more readable for this and to reduce boilerplate, Valibot offers a shortcut for this functionality with ",n(a,{href:"/api/optional/",children:n(e.code,{children:"optional"})}),", ",n(a,{href:"/api/exactOptional/",children:n(e.code,{children:"exactOptional"})}),", ",n(a,{href:"/api/undefinedable/",children:n(e.code,{children:"undefinedable"})}),", ",n(a,{href:"/api/nullable/",children:n(e.code,{children:"nullable"})})," and ",n(a,{href:"/api/nullish/",children:n(e.code,{children:"nullish"})}),"."]}),`
`,n(e.h2,{id:"how-it-works",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#how-it-works",children:n(e.span,{class:"icon icon-link"})}),"How it works"]}),`
`,n(e.p,{children:["To accept ",n(e.code,{children:"undefined"})," and/or ",n(e.code,{children:"null"})," besides your actual value, you just have to wrap the schema in ",n(a,{href:"/api/optional/",children:n(e.code,{children:"optional"})}),", ",n(a,{href:"/api/exactOptional/",children:n(e.code,{children:"exactOptional"})}),", ",n(a,{href:"/api/undefinedable/",children:n(e.code,{children:"undefinedable"})}),", ",n(a,{href:"/api/nullable/",children:n(e.code,{children:"nullable"})})," or ",n(a,{href:"/api/nullish/",children:n(e.code,{children:"nullish"})}),"."]}),`
`,n(e.blockquote,{children:[`
`,n(e.p,{children:["Note: ",n(a,{href:"/api/exactOptional/",children:n(e.code,{children:"exactOptional"})})," allows missing entries in objects, but does not allow ",n(e.code,{children:"undefined"})," as a specified value."]}),`
`]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"OptionalStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"optional"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string | undefined"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ExactOptionalStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"exactOptional"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"UndefinedableStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"undefinedable"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string | undefined"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NullableStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"nullable"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string | null"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NullishStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"nullish"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string | null | undefined"}),`
`]})}),`
`,n(e.h3,{id:"use-in-objects",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#use-in-objects",children:n(e.span,{class:"icon icon-link"})}),"Use in objects"]}),`
`,n(e.p,{children:["When used inside of objects, ",n(a,{href:"/api/optional/",children:n(e.code,{children:"optional"})}),", ",n(a,{href:"/api/exactOptional/",children:n(e.code,{children:"exactOptional"})})," and ",n(a,{href:"/api/nullish/",children:n(e.code,{children:"nullish"})})," is a special case, as it also marks the value as optional in TypeScript with a question mark."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"OptionalKeySchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"})," key",n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"optional"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// { key?: string | undefined }"}),`
`]})}),`
`,n(e.h2,{id:"default-values",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#default-values",children:n(e.span,{class:"icon icon-link"})}),"Default values"]}),`
`,n(e.p,{children:["What makes ",n(a,{href:"/api/optional/",children:n(e.code,{children:"optional"})}),", ",n(a,{href:"/api/exactOptional/",children:n(e.code,{children:"exactOptional"})}),", ",n(a,{href:"/api/undefinedable/",children:n(e.code,{children:"undefinedable"})}),", ",n(a,{href:"/api/nullable/",children:n(e.code,{children:"nullable"})})," and ",n(a,{href:"/api/nullish/",children:n(e.code,{children:"nullish"})})," unique is that the schema functions accept a default value as the second argument. Depending on the schema function, this default value is always used if the input is missing, ",n(e.code,{children:"undefined"})," or ",n(e.code,{children:"null"}),"."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"OptionalStringSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"optional"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:`"I'm the default!"`}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"type"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token maybe-class-name",children:"OptionalStringInput"})})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:n(e.span,{class:"token maybe-class-name",children:"InferInput"})}),n(e.span,{class:"token operator",children:"<"}),n(e.span,{class:"token keyword",children:"typeof"})," ",n(e.span,{class:"token maybe-class-name",children:"OptionalStringSchema"}),n(e.span,{class:"token operator",children:">"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string | undefined"}),`
`,n(e.span,{class:"token keyword",children:"type"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token maybe-class-name",children:"OptionalStringOutput"})})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:n(e.span,{class:"token maybe-class-name",children:"InferOutput"})}),n(e.span,{class:"token operator",children:"<"}),n(e.span,{class:"token keyword",children:"typeof"})," ",n(e.span,{class:"token maybe-class-name",children:"OptionalStringSchema"}),n(e.span,{class:"token operator",children:">"}),n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string"}),`
`]})}),`
`,n(e.p,{children:["By providing a default value, the input type of the schema now differs from the output type. The schema in the example now accepts ",n(e.code,{children:"string"})," and ",n(e.code,{children:"undefined"})," as input, but returns a string as output in both cases."]}),`
`,n(e.h3,{id:"dynamic-default-values",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#dynamic-default-values",children:n(e.span,{class:"icon icon-link"})}),"Dynamic default values"]}),`
`,n(e.p,{children:"In some cases it is necessary to generate the default value dynamically. For this purpose, a function that generates and returns the default value can also be passed as the second argument."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"NullableDateSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"nullable"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"date"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token keyword",children:"new"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token known-class-name class-name",children:"Date"})}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["The previous example thus creates a new instance of the ",n(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",rel:"noreferrer",target:"_blank",children:n(e.code,{children:"Date"})})," class for each validation with ",n(e.code,{children:"null"})," as input, which is then used as the default value."]}),`
`,n(e.h3,{id:"dependent-default-values",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#dependent-default-values",children:n(e.span,{class:"icon icon-link"})}),"Dependent default values"]}),`
`,n(e.p,{children:["In rare cases, a default value for an optional entry may depend on the values of another entries in the same object. This can be achieved by using ",n(a,{href:"/api/transform/",children:n(e.code,{children:"transform"})})," in the ",n(a,{href:"/api/pipe/",children:n(e.code,{children:"pipe"})})," of the object."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"CalculationSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    a`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
    b`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
    sum`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"optional"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"transform"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"("}),"input",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token arrow operator",children:"=>"})," ",n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    `,n(e.span,{class:"token spread operator",children:"..."}),"input",n(e.span,{class:"token punctuation",children:","}),`
    sum`,n(e.span,{class:"token operator",children:":"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"sum"})," ",n(e.span,{class:"token operator",children:"==="})," ",n(e.span,{class:"token keyword nil",children:"undefined"})," ",n(e.span,{class:"token operator",children:"?"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"a"})," ",n(e.span,{class:"token operator",children:"+"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"b"})," ",n(e.span,{class:"token operator",children:":"})," input",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"sum"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),`
`,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})})]})}const m=(s={})=>{const e=c(t,{children:c(i,s,3,null)},3,"Bdkx9E2E");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{m as default,k as frontmatter,u as head,h as headings};
