import{a as t,s as c,t as n,q as i}from"./q-dgQLQ9M1.js";import{u as o}from"./q-CyNgVds-.js";import{L as s}from"./q-BuauhHiJ.js";const d=[{text:"Unions",id:"unions",level:1},{text:"Union schema",id:"union-schema",level:2},{text:"Variant schema",id:"variant-schema",level:2}],u={title:"Unions",meta:[{name:"description",content:"An union represents a logical OR relationship. You can apply this concept to your schemas with union and variant."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller"]}},k={title:"Unions",description:"An union represents a logical OR relationship. You can apply this concept to your schemas with union and variant.",contributors:["fabian-hiller"]};function r(a){const e={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",...o(),...a.components};return n(i,{children:[n(e.h1,{id:"unions",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#unions",children:n(e.span,{class:"icon icon-link"})}),"Unions"]}),`
`,n(e.p,{children:["An union represents a logical OR relationship. You can apply this concept to your schemas with ",n(s,{href:"/api/union/",children:n(e.code,{children:"union"})})," and ",n(s,{href:"/api/variant/",children:n(e.code,{children:"variant"})}),". For ",n(e.a,{href:"https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions",rel:"noreferrer",target:"_blank",children:"discriminated unions"})," you use ",n(s,{href:"/api/variant/",children:n(e.code,{children:"variant"})})," and in all other cases you use ",n(s,{href:"/api/union/",children:n(e.code,{children:"union"})}),"."]}),`
`,n(e.h2,{id:"union-schema",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#union-schema",children:n(e.span,{class:"icon icon-link"})}),"Union schema"]}),`
`,n(e.p,{children:["The schema function ",n(s,{href:"/api/union/",children:n(e.code,{children:"union"})})," creates an OR relationship between any number of schemas that you pass as the first argument in the form of an array. On validation, the schema returns the result of the first schema that was successfully validated."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// TypeScript"}),`
`,n(e.span,{class:"token keyword",children:"type"})," ",n(e.span,{class:"token class-name",children:n(e.span,{class:"token maybe-class-name",children:"Union"})})," ",n(e.span,{class:"token operator",children:"="})," ",n(e.span,{class:"token builtin",children:"string"})," ",n(e.span,{class:"token operator",children:"|"})," ",n(e.span,{class:"token builtin",children:"number"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token comment",children:"// Valibot"}),`
`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"UnionSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"union"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"["}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["If a bad input can be uniquely assigned to one of the schemas based on the data type, the result of that schema is returned. Otherwise, a general issue is returned that contains the issues of each schema as subissues. This is a special case within the library, as the issues of ",n(s,{href:"/api/union/",children:n(e.code,{children:"union"})})," can contradict each other."]}),`
`,n(e.p,{children:["The following issues are returned if the input is ",n(e.code,{children:"null"})," instead of a string or number. Since the input cannot be associated with a schema in this case, the issues of both schemas are returned as subissues."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token punctuation",children:"["}),`
  `,n(e.span,{class:"token punctuation",children:"{"}),`
    kind`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'schema'"}),n(e.span,{class:"token punctuation",children:","}),`
    type`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'union'"}),n(e.span,{class:"token punctuation",children:","}),`
    input`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token keyword null nil",children:"null"}),n(e.span,{class:"token punctuation",children:","}),`
    expected`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'string | number'"}),n(e.span,{class:"token punctuation",children:","}),`
    received`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'null'"}),n(e.span,{class:"token punctuation",children:","}),`
    message`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'Invalid type: Expected string | number but received null'"}),n(e.span,{class:"token punctuation",children:","}),`
    issues`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token punctuation",children:"["}),`
      `,n(e.span,{class:"token punctuation",children:"{"}),`
        kind`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'schema'"}),n(e.span,{class:"token punctuation",children:","}),`
        type`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'string'"}),n(e.span,{class:"token punctuation",children:","}),`
        input`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token keyword null nil",children:"null"}),n(e.span,{class:"token punctuation",children:","}),`
        expected`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'string'"}),n(e.span,{class:"token punctuation",children:","}),`
        received`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'null'"}),n(e.span,{class:"token punctuation",children:","}),`
        message`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'Invalid type: Expected string but received null'"}),n(e.span,{class:"token punctuation",children:","}),`
      `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
      `,n(e.span,{class:"token punctuation",children:"{"}),`
        kind`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'schema'"}),n(e.span,{class:"token punctuation",children:","}),`
        type`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'number'"}),n(e.span,{class:"token punctuation",children:","}),`
        input`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token keyword null nil",children:"null"}),n(e.span,{class:"token punctuation",children:","}),`
        expected`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'number'"}),n(e.span,{class:"token punctuation",children:","}),`
        received`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'null'"}),n(e.span,{class:"token punctuation",children:","}),`
        message`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'Invalid type: Expected number but received null'"}),n(e.span,{class:"token punctuation",children:","}),`
      `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
    `,n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
`,n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.h2,{id:"variant-schema",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#variant-schema",children:n(e.span,{class:"icon icon-link"})}),"Variant schema"]}),`
`,n(e.p,{children:["For better performance, more type safety, and a more targeted output of issues, you can use ",n(s,{href:"/api/variant/",children:n(e.code,{children:"variant"})})," for discriminated unions. Therefore, we recommend using ",n(s,{href:"/api/variant/",children:n(e.code,{children:"variant"})})," over ",n(s,{href:"/api/union/",children:n(e.code,{children:"union"})})," whenever possible. A discriminated union is an OR relationship between objects that can be distinguished by a specific key."]}),`
`,n(e.p,{children:"When you call the schema function, you first specify the discriminator key. This is used to determine the schema to use for validation based on the input. The object schemas, in the form of an array, follow as the second argument."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"VariantScheme"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"variant"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'type'"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"["}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    type`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"literal"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'foo'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
    foo`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  v`,n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    type`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"literal"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'bar'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
    bar`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"number"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
`,n(e.span,{class:"token punctuation",children:"]"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["For very complex datasets, multiple ",n(s,{href:"/api/variant/",children:n(e.code,{children:"variant"})})," schemas can also be deeply nested within one another."]})]})}const m=(a={})=>{const e=t(c,{children:t(r,a,3,null)},3,"OCAMmvnK");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{m as default,k as frontmatter,u as head,d as headings};
