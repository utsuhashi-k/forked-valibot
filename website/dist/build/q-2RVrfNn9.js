import{a as t,s as c,t as n,q as o}from"./q-dgQLQ9M1.js";import{u as l}from"./q-CyNgVds-.js";import{L as a}from"./q-BuauhHiJ.js";const h=[{text:"Parse data",id:"parse-data",level:1},{text:"Parse and throw",id:"parse-and-throw",level:2},{text:"Parse and return",id:"parse-and-return",level:2},{text:"Type guards",id:"type-guards",level:2},{text:"Configuration",id:"configuration",level:2},{text:"Abort validation",id:"abort-validation",level:3},{text:"Abort pipeline",id:"abort-pipeline",level:3}],u={title:"Parse data",meta:[{name:"description",content:"Now that you've learned how to create a schema, let's look at how you can use it to validate unknown data and make it type-safe."}],styles:[],links:[],scripts:[],frontmatter:{contributors:["fabian-hiller","BastiDood","SeaSide53","cmaciasjimenez"]}},k={title:"Parse data",description:"Now that you've learned how to create a schema, let's look at how you can use it to validate unknown data and make it type-safe.",contributors:["fabian-hiller","BastiDood","SeaSide53","cmaciasjimenez"]};function i(s){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",...l(),...s.components};return n(o,{children:[n(e.h1,{id:"parse-data",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#parse-data",children:n(e.span,{class:"icon icon-link"})}),"Parse data"]}),`
`,n(e.p,{children:"Now that you've learned how to create a schema, let's look at how you can use it to validate unknown data and make it type-safe. There are three different ways to do this."}),`
`,n(e.blockquote,{children:[`
`,n(e.p,{children:["Each schema has a ",n(e.code,{children:"~run"})," method. However, this is an internal API and should only be used if you know what you are doing."]}),`
`]}),`
`,n(e.h2,{id:"parse-and-throw",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#parse-and-throw",children:n(e.span,{class:"icon icon-link"})}),"Parse and throw"]}),`
`,n(e.p,{children:["The ",n(a,{href:"/api/parse/",children:n(e.code,{children:"parse"})})," method will throw a ",n(a,{href:"/api/ValiError/",children:n(e.code,{children:"ValiError"})})," if the input does not match the schema. Therefore, you should use a try/catch block to catch errors. If the input matches the schema, it is valid and the output of the schema will be returned with the correct TypeScript type."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword control-flow",children:"try"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," email ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"parse"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"EmailSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:"'jane@example.com'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

  `,n(e.span,{class:"token comment",children:"// Handle errors if one occurs"}),`
`,n(e.span,{class:"token punctuation",children:"}"})," ",n(e.span,{class:"token keyword control-flow",children:"catch"})," ",n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token console class-name",children:"console"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"log"}),n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token punctuation",children:"}"}),`
`]})}),`
`,n(e.h2,{id:"parse-and-return",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#parse-and-return",children:n(e.span,{class:"icon icon-link"})}),"Parse and return"]}),`
`,n(e.p,{children:["If you want issues to be returned instead of thrown, you can use ",n(a,{href:"/api/safeParse/",children:n(e.code,{children:"safeParse"})}),". The returned value then contains the ",n(e.code,{children:".success"})," property, which is ",n(e.code,{children:"true"})," if the input is valid or ",n(e.code,{children:"false"})," otherwise."]}),`
`,n(e.p,{children:["If the input is valid, you can use ",n(e.code,{children:".output"})," to get the output of the schema validation. Otherwise, if the input was invalid, the issues found can be accessed via ",n(e.code,{children:".issues"}),"."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," result ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"safeParse"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"EmailSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:"'jane@example.com'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword control-flow",children:"if"})," ",n(e.span,{class:"token punctuation",children:"("}),"result",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"success"}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," email ",n(e.span,{class:"token operator",children:"="})," result",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"output"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token punctuation",children:"}"})," ",n(e.span,{class:"token keyword control-flow",children:"else"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token console class-name",children:"console"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"log"}),n(e.span,{class:"token punctuation",children:"("}),"result",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token property-access",children:"issues"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token punctuation",children:"}"}),`
`]})}),`
`,n(e.h2,{id:"type-guards",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#type-guards",children:n(e.span,{class:"icon icon-link"})}),"Type guards"]}),`
`,n(e.p,{children:["Another way to validate data that can be useful in individual cases is to use a type guard. You can use either a type predicate with the ",n(a,{href:"/api/is/",children:n(e.code,{children:"is"})})," method or an assertion function with the ",n(a,{href:"/api/assert/",children:n(e.code,{children:"assert"})})," method."]}),`
`,n(e.p,{children:"If a type guard is used, the issues of the validation cannot be accessed. Also, transformations have no effect and unknown keys of an object are not removed. Therefore, this approach is not as safe and powerful as the two previous ways. Also, due to a TypeScript limitation, it can currently only be used with synchronous schemas."}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token keyword",children:"const"})," data",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token builtin",children:"unknown"})," ",n(e.span,{class:"token operator",children:"="})," ",n(e.span,{class:"token string",children:"'jane@example.com'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword control-flow",children:"if"})," ",n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token keyword",children:"is"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"EmailSchema"}),n(e.span,{class:"token punctuation",children:","})," data",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," email ",n(e.span,{class:"token operator",children:"="})," data",n(e.span,{class:"token punctuation",children:";"})," ",n(e.span,{class:"token comment",children:"// string"}),`
`,n(e.span,{class:"token punctuation",children:"}"}),`
`]})}),`
`,n(e.h2,{id:"configuration",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#configuration",children:n(e.span,{class:"icon icon-link"})}),"Configuration"]}),`
`,n(e.p,{children:["By default, Valibot exhaustively collects every issue during validation to give you detailed feedback on why the input does not match the schema. If this is not required for your use case, you can control this behavior with ",n(e.code,{children:"abortEarly"})," and ",n(e.code,{children:"abortPipeEarly"})," to improve the performance of validation."]}),`
`,n(e.h3,{id:"abort-validation",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#abort-validation",children:n(e.span,{class:"icon icon-link"})}),"Abort validation"]}),`
`,n(e.p,{children:["If you set ",n(e.code,{children:"abortEarly"})," to ",n(e.code,{children:"true"}),", data validation immediately aborts upon finding the first issue. If you just want to know if some data matches a schema, but you don't care about the details, this can improve performance."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword control-flow",children:"try"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"ProfileSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"object"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:"{"}),`
    name`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
    bio`,n(e.span,{class:"token operator",children:":"})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," profile ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"parse"}),n(e.span,{class:"token punctuation",children:"("}),`
    `,n(e.span,{class:"token maybe-class-name",children:"ProfileSchema"}),n(e.span,{class:"token punctuation",children:","}),`
    `,n(e.span,{class:"token punctuation",children:"{"})," name",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"'Jane'"}),n(e.span,{class:"token punctuation",children:","})," bio",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token string",children:"''"})," ",n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:","}),`
    `,n(e.span,{class:"token punctuation",children:"{"})," abortEarly",n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token boolean",children:"true"})," ",n(e.span,{class:"token punctuation",children:"}"}),`
  `,n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

  `,n(e.span,{class:"token comment",children:"// Handle errors if one occurs"}),`
`,n(e.span,{class:"token punctuation",children:"}"})," ",n(e.span,{class:"token keyword control-flow",children:"catch"})," ",n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token console class-name",children:"console"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"log"}),n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token punctuation",children:"}"}),`
`]})}),`
`,n(e.h3,{id:"abort-pipeline",children:[n(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#abort-pipeline",children:n(e.span,{class:"icon icon-link"})}),"Abort pipeline"]}),`
`,n(e.p,{children:["If you only set ",n(e.code,{children:"abortPipeEarly"})," to ",n(e.code,{children:"true"}),", the validation within a pipeline will only abort after finding the first issue. For example, if you only want to show the first error of a field when validating a form, you can use this option to improve performance."]}),`
`,n(e.pre,{class:"language-ts",children:n(e.code,{class:"language-ts",children:[n(e.span,{class:"token keyword module",children:"import"})," ",n(e.span,{class:"token imports",children:[n(e.span,{class:"token operator",children:"*"})," ",n(e.span,{class:"token keyword module",children:"as"})," v"]})," ",n(e.span,{class:"token keyword module",children:"from"})," ",n(e.span,{class:"token string",children:"'valibot'"}),n(e.span,{class:"token punctuation",children:";"}),`

`,n(e.span,{class:"token keyword control-flow",children:"try"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," ",n(e.span,{class:"token maybe-class-name",children:"EmailSchema"})," ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"pipe"}),n(e.span,{class:"token punctuation",children:"("}),"v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"string"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"email"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:","})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"endsWith"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token string",children:"'@example.com'"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
  `,n(e.span,{class:"token keyword",children:"const"})," email ",n(e.span,{class:"token operator",children:"="})," v",n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"parse"}),n(e.span,{class:"token punctuation",children:"("}),n(e.span,{class:"token maybe-class-name",children:"EmailSchema"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token string",children:"'jane@example.com'"}),n(e.span,{class:"token punctuation",children:","})," ",n(e.span,{class:"token punctuation",children:"{"}),`
    abortPipeEarly`,n(e.span,{class:"token operator",children:":"})," ",n(e.span,{class:"token boolean",children:"true"}),n(e.span,{class:"token punctuation",children:","}),`
  `,n(e.span,{class:"token punctuation",children:"}"}),n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`

  `,n(e.span,{class:"token comment",children:"// Handle errors if one occurs"}),`
`,n(e.span,{class:"token punctuation",children:"}"})," ",n(e.span,{class:"token keyword control-flow",children:"catch"})," ",n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"})," ",n(e.span,{class:"token punctuation",children:"{"}),`
  `,n(e.span,{class:"token console class-name",children:"console"}),n(e.span,{class:"token punctuation",children:"."}),n(e.span,{class:"token method function property-access",children:"log"}),n(e.span,{class:"token punctuation",children:"("}),"error",n(e.span,{class:"token punctuation",children:")"}),n(e.span,{class:"token punctuation",children:";"}),`
`,n(e.span,{class:"token punctuation",children:"}"}),`
`]})})]})}const m=(s={})=>{const e=t(c,{children:t(i,s,3,null)},3,"eiSbF_1y");return typeof MDXLayout=="function"?n(MDXLayout,{children:e}):e};export{m as default,k as frontmatter,u as head,h as headings};
